<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record model="telegram.command" id="telegram.command_start">
        <field name="response_template" type="xml">
<t>
<t t-if="data['type'] == 'choose_language'">
Choose your language
</t>
<t t-if="data['type'] == 'finish'">
Hi! I am a bot to account expenses, income, plan budgets, etc.
To see examples of my reports simply send command /report_example.
To add new record about an expense, send a text message for example "Dinner 200". You are able to remove any test data by sending command /reset. To get full list of available commands send /help.

I'm at your command!
</t>
</t>
        </field>
        <field name="group_ids" eval="[]"/>
    </record>

    <record model="telegram.command" id="command_about">
        <field name="name">/about</field>
        <field name="description">About me</field>
        <field name="sequence" eval="1000"/>
        <field name="group_ids" eval="[]"/>
        <field name="response_template" type="xml">
            <t>
I was created as an example of usage odoo-telegram framework.
https://github.com/it-projects-llc/odoo-telegram

But my master hopes that I could be helpful for folks.
        </t></field>
    </record>

    <record model="telegram.command" id="command_add_record">
        <field name="name">%[0-9]+%</field>
        <field name="description">Add new record</field>
        <field name="sequence" eval="1000"/>
        <field name="group_ids" eval="[]"/>
        <field name="response_code">
m = re.match(r'(.*?) ([0-9.,]*) ?(.*)', telegram['tmessage'].text)
text = m.group(1)
amount = m.group(2)
currency = m.group(3)

record = command.sudo().em_add_new_record(env.user.partner_id,
                                   text, amount, currency)
data['record'] = record
        </field>
        <field name="response_template" type="xml">
<t>New record is added! Check or edit it here: /record_<t t-esc="data['record'].id"/></t>
        </field>
        <field name="active" eval="False"/>
    </record>
</odoo>
